import{r as d,u as g,a as j,j as e,_ as f,b as y,l as C,R as k,c as h,I as L,d as S,B as A}from"./BBHT1DsL-1713421630921.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=i(n);fetch(n.href,t)}})();var O={VITE_APP_REACT_URL:"http://192.168.31.80:3939/api/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_REACT_URL:x}=O;function P(s){const o=s+"=",a=decodeURIComponent(document.cookie).split(";");for(let n=0;n<a.length;n++){let t=a[n];for(;t.charAt(0)===" ";)t=t.substring(1);if(t.indexOf(o)===0)return JSON.parse(t.substring(o.length,t.length))}return""}function E(s,o){document.cookie=s+"="+JSON.stringify(o)+";path=/"}const R=()=>{d.useEffect(()=>{t()},[]);const[s,o]=d.useState([]),[i,a]=d.useState([]),n=g(),t=async()=>{try{const r=await j.get(x+"/app");o(r.data.names),a(r.data.names)}catch(r){o(["Nagagold","GK"]),console.log(r)}},[l,c]=d.useState({title:"",isOpen:!1}),u=r=>{c({title:r,isOpen:!0})},p=r=>{const m=new RegExp(`${r}`,"i");if(r==="")a(s);else{const b=s.filter(N=>m.test(N));a(b)}};return e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[e.jsx("h1",{children:" List App "}),e.jsx("input",{className:"outline-none border-2 p-1 rounded-full px-4 border-gray-300  focus:border-[#178DF9]",placeholder:"Cari App",onChange:r=>p(r.target.value)}),e.jsx("div",{className:"flex flex-col gap-3 mt-4",children:i.map((r,m)=>e.jsx("div",{onClick:()=>u(r),className:"flex w-full border-2 rounded p-2 hover:border-[#178DF9] cursor-pointer",children:r},m))}),l.isOpen&&e.jsxs("div",{className:`fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex justify-center items-center ${l.isOpen?"":"hidden"}`,children:[e.jsxs("div",{className:"relative max-w-md p-8 m-4 bg-white rounded-md w-80",children:[e.jsxs("div",{className:"mb-4 text-xl font-bold",children:["Apakah anda yakin ingin update ",l.title," ?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>c({title:"",isOpen:!1}),className:"px-4 py-2 mr-2 font-bold text-white bg-[#ee6e6e] rounded hover:bg-[#a53636]",children:"No"}),e.jsx("button",{onClick:()=>{n("/detail/"+l.title)},className:"px-4 py-2 font-bold text-white bg-[#78b7f1] rounded hover:bg-[#178DF9]",children:"Yes"})]})]}),e.jsx("button",{onClick:()=>{c({title:"",isOpen:!1})},className:"absolute top-0 right-0 p-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]})},D="/assets/images/qILC5JLC-1713421630921.png",I=()=>{const[s,o]=d.useState({username:"",password:"",loading:!1}),i=g(),a=async()=>{if(!s.username)return f.error("Username is required"),!1;if(!s.password)return f.error("Password is required"),!1;try{o({...s,loading:!0}),await f.promise(n(s),{loading:"Checking...",success:e.jsx("b",{children:"Login Success!"}),error:e.jsx("b",{children:"Username and Password wrong."})}),o({...s,loading:!1}),i("/home"),E("datalogin",s)}catch{o({...s,loading:!1})}},n=t=>new Promise((l,c)=>{setTimeout(()=>{t.username==="nsi"&&t.password==="developer"?l(!0):c(!1)},2e3)});return d.useEffect(()=>{P("datalogin").username&&i("/home")},[i]),e.jsx("div",{className:"flex items-center align-middle h-full p-5",children:e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("img",{src:D,className:"w-52"})}),e.jsx("input",{value:s.username,className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Username",onChange:t=>o({...s,username:t.target.value})}),e.jsx("input",{value:s.password,type:"password",className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Password",onChange:t=>o({...s,password:t.target.value})}),e.jsxs("button",{onClick:()=>a(),className:"bg-[#178DF9] w-full rounded text-white p-2 outline-none",children:[" ",s.loading?e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"Checking Data"]}):"Login"]})]})})},v=d.createContext(void 0),_=({children:s})=>{const[o,i]=d.useState(!1),[a,n]=d.useState(!1);return e.jsx(v.Provider,{value:{fullScreen:o,setFullScreen:i,isLoading:a,setIsLoading:n},children:s})},w=()=>{const s=d.useContext(v);if(!s)throw new Error("useActiveChat must be used within a HookProvider");return s},F=()=>{const s=y(),o=g(),{fullScreen:i,setFullScreen:a,setIsLoading:n,isLoading:t}=w();d.useEffect(()=>{l()},[]);const l=()=>{const c=C(x.replace("/api/v1",""));c.connect(),c.on("connect",async()=>{c.emit("join-room",s.id);const u=[];c.on("update-progress",p=>{const r=document.getElementById("logConsole");p.status==="PROGRESS"?(u.push(p.message),r.value=u.join(`
`),r.scrollTop=r.scrollHeight,n(!0)):p.status==="FINISH"&&(n(!1),f.success("Update Finish"),u.push(`
`),u.push("Update Finish"),u.push(`
`),r.value=u.join(`
`),r.scrollTop=r.scrollHeight+400)});try{await j.post(x+"/app/update",{name:s.id,socketId:c.id})}catch(p){p.response.data.message.includes("processed")&&(f("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),n(!0))}})};return e.jsxs("div",{className:"terminal-container w-full h-full rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"terminal-header bg-gray-800 flex items-center justify-between px-4 py-2",children:[e.jsx("div",{className:"flex items-center space-x-2",onClick:()=>o("/home"),children:e.jsx("i",{className:"fa-solid fa-chevron-left text-white cursor-pointer"})}),e.jsxs("div",{className:"text-sm text-white justify-center",children:["Terminal App ",s.id," ",t&&e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-white absolute ml-2"})]}),e.jsx("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>a(!i),children:e.jsx("i",{className:"fa-solid fa-maximize text-white"})})]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"terminal-line",children:e.jsx("textarea",{readOnly:!0,id:"logConsole",className:"p-2 terminal-input bg-black text-white focus:outline-none resize-none w-full h-screen overflow-y-auto"})})})]})},T=()=>{const{fullScreen:s}=w();return e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:`${s?"w-full":"xxl:w-[25rem] w-full overflow-y-auto no-scrollbar h-screen rounded-md shadow-md md:w-[60%] lg:w-1/3 xl:w-[30%]"} `,children:e.jsxs(k,{children:[e.jsx(h,{index:!0,element:e.jsx(I,{})}),e.jsx(h,{path:"home",element:e.jsx(R,{})}),e.jsx(h,{path:"detail/:id",element:e.jsx(F,{})})]})}),e.jsx(L,{position:"bottom-center",reverseOrder:!1})]})};S.createRoot(document.getElementById("root")).render(e.jsx(A,{children:e.jsx(_,{children:e.jsx(T,{})})}));

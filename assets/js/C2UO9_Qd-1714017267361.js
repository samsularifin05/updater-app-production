import{u as g,r as l,j as e,R as B,_ as p,a as N,l as E,b as C,c as j,I as _,d as A,B as D}from"./unFXZS9E-1714017267361.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(n){if(n.ep)return;n.ep=!0;const t=i(n);fetch(n.href,t)}})();var P={VITE_APP_REACT_URL:"http://192.168.31.29:3939/api/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_REACT_URL:b}=P,T=(s,a)=>{localStorage.setItem(s,JSON.stringify(a))},w=s=>{const a=localStorage.getItem(s);return a===null?null:JSON.parse(a)},F=s=>{const{modal:a,setModal:i}=s,c=g(),[n,t]=l.useState(!1),[o,d]=l.useState({fe:"",be:""}),x=()=>{if(o.fe==="")return p.error("Nama Branch Fe Harus Diisi"),!1;if(o.be==="")return p.error("Nama Branch Be Harus Diisi"),!1;const f=`?id=${a.title}&namaBranchFe=${o.fe}&namaBranchBe=${o.be}`;c(`/detail${f}`)};return e.jsx(B.Fragment,{children:e.jsxs("div",{className:`fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex justify-center items-center ${a.isOpen?"":"hidden"}`,children:[e.jsxs("div",{className:"relative max-w-md p-8 m-4 bg-white rounded-md w-80",children:[e.jsxs("div",{className:"mb-4 text-xl font-bold",children:["Apakah anda yakin ingin update ",a.title," ?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>i({title:"",isOpen:!1,is_branch_avail:!1}),className:"px-4 py-2 mr-2 font-bold text-white bg-[#ee6e6e] rounded hover:bg-[#a53636]",children:"No"}),e.jsx("button",{onClick:()=>{a.is_branch_avail?t(!0):c("/detail?id="+a.title)},className:"px-4 py-2 font-bold text-white bg-[#78b7f1] rounded hover:bg-[#178DF9]",children:"Yes"})]})]}),e.jsx("button",{onClick:()=>{i({title:"",isOpen:!1,is_branch_avail:!1})},className:"absolute top-0 right-0 p-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),n&&e.jsx("div",{className:`fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex justify-center items-center ${n?"":"hidden"}`,children:e.jsxs("div",{className:"flex flex-col gap-4 p-8 m-4 bg-white rounded-md w-80",children:[e.jsx("div",{className:"mb-4 text-xl font-bold",children:"Masukan Nama Branch"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{children:"Branch Fe"}),e.jsx("input",{placeholder:"Masukan Nama Branch Fe",value:o.fe,onChange:f=>d({...o,fe:f.target.value}),className:"flex w-full p-2 rounded outline-none outline-slate-400"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{children:"Branch Be"}),e.jsx("input",{placeholder:"Masukan Nama Branch Be",value:o.be,onChange:f=>d({...o,be:f.target.value}),className:"flex w-full p-2 rounded outline-none outline-slate-400"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 mr-2 font-bold text-white bg-[#ee6e6e] rounded hover:bg-[#a53636]",children:"No"}),e.jsx("button",{onClick:()=>x(),className:"px-4 py-2 font-bold text-white bg-[#78b7f1] rounded hover:bg-[#178DF9]",children:"Yes"})]})]})})]})})},I=()=>{l.useEffect(()=>{t()},[]);const s=g();l.useEffect(()=>{const r=w("isLogin");s(r?"/home":"/")},[s]);const[a,i]=l.useState([]),[c,n]=l.useState([]),t=async()=>{try{const r=await N.get(b+"/app");i(r.data.names),n(r.data.names)}catch(r){i([]),console.log(r)}},[o,d]=l.useState({title:"",isOpen:!1,is_branch_avail:!1}),x=r=>{d({title:r.name,isOpen:!0,is_branch_avail:r.is_branch_avail})},f=r=>{const u=new RegExp(`${r}`,"i");if(r==="")n(a);else{const k=a.filter(S=>u.test(S.name));n(k)}},[h,m]=l.useState(-1),v=r=>{m(r===h?-1:r)};return e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[e.jsx("h1",{children:" List App "}),e.jsx("input",{className:"outline-none border-2 p-1 rounded-full px-4 border-gray-300  focus:border-[#178DF9]",placeholder:"Cari App",onChange:r=>f(r.target.value)}),e.jsx("div",{className:"flex flex-col gap-3 mt-4",children:c.map((r,u)=>e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>v(u),className:"flex items-center justify-between w-full p-2 border-2 rounded cursor-pointer",children:[e.jsx("p",{children:r.name}),h===u?e.jsx("i",{className:"fa-solid fa-circle-chevron-down text-[#141E46]"}):e.jsx("i",{className:"fa-solid fa-circle-chevron-right text-[#141E46]"})]}),h===u&&e.jsxs("div",{className:"flex gap-2 p-2 border border-gray-200 rounded h-30",children:[e.jsxs("button",{onClick:()=>x(r),className:"bg-[#141E46] w-full rounded text-white",children:[" ","Update"," "]}),e.jsxs("a",{href:r.link_qc,target:"_blank",className:"bg-[#41B06E] w-full rounded flex justify-center text-white",children:[" ","Link Qc"," "]})]})]},u))}),o.isOpen&&e.jsx(F,{modal:o,setModal:r=>d(r)})]})},O="/assets/images/qILC5JLC-1714017267361.png",R=()=>{const[s,a]=l.useState({username:"",password:"",loading:!1}),i=g(),c=async()=>{if(!s.username)return p.error("Username is required"),!1;if(!s.password)return p.error("Password is required"),!1;try{a({...s,loading:!0}),await p.promise(n(s),{loading:"Checking...",success:e.jsx("b",{children:"Login Success!"}),error:e.jsx("b",{children:"Username and Password wrong."})}),a({...s,loading:!1}),i("/home"),T("isLogin",!0)}catch{a({...s,loading:!1})}},n=t=>new Promise((o,d)=>{setTimeout(()=>{t.username==="nsi"&&t.password==="developer"?o(!0):d(!1)},2e3)});return l.useEffect(()=>{const t=w("isLogin");i(t?"/home":"/")},[i]),e.jsx("div",{className:"flex items-center h-full p-5 align-middle",children:e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("img",{src:O,className:"w-52"})}),e.jsx("input",{value:s.username,className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Username",onChange:t=>a({...s,username:t.target.value})}),e.jsx("input",{value:s.password,type:"password",className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Password",onChange:t=>a({...s,password:t.target.value})}),e.jsxs("button",{onClick:()=>c(),className:"bg-[#178DF9] w-full rounded text-white p-2 outline-none",children:[" ",s.loading?e.jsxs("div",{children:[e.jsx("i",{className:"mr-2 fa-solid fa-spinner fa-spin"}),"Checking Data"]}):"Login"]})]})})},y=l.createContext(void 0),M=({children:s})=>{const[a,i]=l.useState(!1),[c,n]=l.useState(!1);return e.jsx(y.Provider,{value:{fullScreen:a,setFullScreen:i,isLoading:c,setIsLoading:n},children:s})},L=()=>{const s=l.useContext(y);if(!s)throw new Error("useActiveChat must be used within a HookProvider");return s},U=()=>{const s=new URLSearchParams(location.search),a=s.get("id"),i=s.get("namaBranchFe"),c=s.get("namaBranchBe"),n=g(),{fullScreen:t,setFullScreen:o,setIsLoading:d,isLoading:x}=L();l.useEffect(()=>{f()},[]),l.useEffect(()=>{w("isLogin")||n("/")},[n]);const f=()=>{const h=E(b.replace("/api/v1",""));h.connect(),h.on("connect",async()=>{var v;h.emit("join-room",a);const m=[];h.on("update-progress",r=>{const u=document.getElementById("logConsole");r.status==="PROGRESS"?(m.push(r.message),u.value=m==null?void 0:m.join(`
`),u.scrollTop=u.scrollHeight+400,d(!0)):r.status==="FINISH"&&(d(!1),p.success("Update Finish"),m.push(`
`),m.push("Update Finish"),m.push(`
`),u.value=m==null?void 0:m.join(`
`),u.scrollTop=u.scrollHeight+400)});try{await N.post(b+"/app/update",{name:a,branchBe:c||void 0,branchFe:i||void 0})}catch(r){(v=r.response.data.message)!=null&&v.includes("processed")?(p("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),d(!0)):(p.error(r.response.data.message),d(!1))}})};return e.jsxs("div",{className:"w-full h-full overflow-hidden border border-gray-700 rounded-lg terminal-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 terminal-header",children:[e.jsx("div",{className:"flex items-center space-x-2",onClick:()=>n("/home"),children:e.jsx("i",{className:"text-white cursor-pointer fa-solid fa-chevron-left"})}),e.jsxs("div",{className:"justify-center text-sm text-white",children:["Terminal App ",a," ",x&&e.jsx("i",{className:"absolute ml-2 text-white fa-solid fa-spinner fa-spin"})]}),e.jsx("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>o(!t),children:e.jsx("i",{className:"text-white fa-solid fa-maximize"})})]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"terminal-line",children:e.jsx("textarea",{readOnly:!0,id:"logConsole",className:"w-full h-screen p-2 overflow-y-auto text-white bg-black resize-none terminal-input focus:outline-none"})})})]})},H=()=>{const{fullScreen:s}=L(),[a,i]=l.useState(Date.now());l.useEffect(()=>{const n=setTimeout(()=>{Date.now()-a>12e5&&localStorage.clear()},1e3),t=()=>{i(Date.now())};return window.addEventListener("mousemove",t),window.addEventListener("keydown",t),()=>{clearTimeout(n),window.removeEventListener("mousemove",t),window.removeEventListener("keydown",t)}},[a]);const c=g();return e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:`${s?"w-full":"xxl:w-[25rem] w-full overflow-y-auto no-scrollbar h-screen rounded-md shadow-md md:w-[60%] lg:w-1/3 xl:w-[30%]"} `,children:e.jsxs(C,{children:[e.jsx(j,{index:!0,element:e.jsx(R,{})}),e.jsx(j,{path:"home",element:e.jsx(I,{})}),e.jsx(j,{path:"detail",element:e.jsx(U,{})}),e.jsx(j,{path:"*",element:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-2",children:["Halaman Tidak Di Teumakan ",e.jsx("br",{}),e.jsxs("button",{onClick:()=>c("/home"),className:"bg-[#41B06E] p-1 rounded text-white text-[10px]",children:[" ","Kembali"," "]})]})})]})}),e.jsx(_,{position:"bottom-center",reverseOrder:!1})]})};A.createRoot(document.getElementById("root")).render(e.jsx(D,{children:e.jsx(M,{children:e.jsx(H,{})})}));

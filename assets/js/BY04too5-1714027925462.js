import{u as v,r as u,j as e,R as E,_ as x,a as N,l as L,b as _,c as b,I as T,d as A,B as F}from"./N7NqU8jB-1714027925462.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();var I={VITE_APP_REACT_URL:"http://192.168.31.80:3939/api/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_REACT_URL:w}=I,P=(s,t)=>{localStorage.setItem(s,JSON.stringify(t))},S=s=>{const t=localStorage.getItem(s);return t===null?null:JSON.parse(t)},D=s=>{const{modal:t,setModal:i}=s,d=v(),[n,a]=u.useState(!1),[o,h]=u.useState({fe:"",be:""}),m=()=>{if(o.fe==="")return x.error("Nama Branch Fe Harus Diisi"),!1;if(o.be==="")return x.error("Nama Branch Be Harus Diisi"),!1;const c=`?id=${t.title}&namaBranchFe=${o.fe}&namaBranchBe=${o.be}`;d(`/detail${c}`)};return e.jsx(E.Fragment,{children:e.jsxs("div",{className:`fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex justify-center items-center ${t.isOpen?"":"hidden"}`,children:[e.jsxs("div",{className:"relative max-w-md p-8 m-4 bg-white rounded-md w-80",children:[e.jsxs("div",{className:"mb-4 text-xl font-bold",children:["Apakah anda yakin ingin update ",t.title," ?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>i({title:"",isOpen:!1,is_branch_avail:!1}),className:"px-4 py-2 mr-2 font-bold text-white bg-[#ee6e6e] rounded hover:bg-[#a53636]",children:"No"}),e.jsx("button",{onClick:()=>{t.is_branch_avail?a(!0):d("/detail?id="+t.title)},className:"px-4 py-2 font-bold text-white bg-[#78b7f1] rounded hover:bg-[#178DF9]",children:"Yes"})]})]}),e.jsx("button",{onClick:()=>{i({title:"",isOpen:!1,is_branch_avail:!1})},className:"absolute top-0 right-0 p-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),n&&e.jsx("div",{className:`fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex justify-center items-center ${n?"":"hidden"}`,children:e.jsxs("div",{className:"flex flex-col gap-4 p-8 m-4 bg-white rounded-md w-80",children:[e.jsx("div",{className:"mb-4 text-xl font-bold",children:"Masukan Nama Branch"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{children:"Branch Fe"}),e.jsx("input",{placeholder:"Masukan Nama Branch Fe",value:o.fe,onChange:c=>h({...o,fe:c.target.value}),className:"flex w-full p-2 rounded outline-none outline-slate-400"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{children:"Branch Be"}),e.jsx("input",{placeholder:"Masukan Nama Branch Be",value:o.be,onChange:c=>h({...o,be:c.target.value}),className:"flex w-full p-2 rounded outline-none outline-slate-400"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 mr-2 font-bold text-white bg-[#ee6e6e] rounded hover:bg-[#a53636]",children:"No"}),e.jsx("button",{onClick:()=>m(),className:"px-4 py-2 font-bold text-white bg-[#78b7f1] rounded hover:bg-[#178DF9]",children:"Yes"})]})]})})]})})},O=()=>{u.useEffect(()=>{a()},[]);const s=v();u.useEffect(()=>{const r=S("isLogin");s(r?"/home":"/")},[s]);const[t,i]=u.useState([]),[d,n]=u.useState([]),a=async()=>{try{const r=await N.get(w+"/app");i(r.data.names),n(r.data.names)}catch(r){i([]),console.log(r)}},[o,h]=u.useState({title:"",isOpen:!1,is_branch_avail:!1}),m=r=>{h({title:r.name,isOpen:!0,is_branch_avail:r.is_branch_avail})},c=r=>{const j=new RegExp(`${r}`,"i");if(r==="")n(t);else{const B=t.filter(C=>j.test(C.name));n(B)}},[f,p]=u.useState(-1),l=r=>{p(r===f?-1:r)},g=r=>{const j=`?id=${r.name}`;s(`/log${j}`)};return e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[e.jsx("h1",{children:" List App "}),e.jsx("input",{className:"outline-none border-2 p-1 rounded-full px-4 border-gray-300  focus:border-[#178DF9]",placeholder:"Cari App",onChange:r=>c(r.target.value)}),e.jsx("div",{className:"flex flex-col gap-3 mt-4",children:d.map((r,j)=>e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>l(j),className:"flex items-center justify-between w-full p-2 border-2 rounded cursor-pointer",children:[e.jsx("p",{children:r.name}),f===j?e.jsx("i",{className:"fa-solid fa-circle-chevron-down text-[#141E46]"}):e.jsx("i",{className:"fa-solid fa-circle-chevron-right text-[#141E46]"})]}),f===j&&e.jsxs("div",{className:"flex gap-2 p-2 border border-gray-200 rounded h-30",children:[e.jsxs("button",{onClick:()=>m(r),className:"bg-[#141E46] w-full rounded text-white",children:[" ","Update App"]}),e.jsxs("button",{onClick:()=>g(r),className:"bg-[#304cba] w-full rounded text-white",children:[" ","Git Log"," "]}),e.jsxs("a",{href:r.link_qc,target:"_blank",className:"bg-[#41B06E] w-full rounded flex justify-center text-white",children:[" ","Link Qc"," "]})]})]},j))}),o.isOpen&&e.jsx(D,{modal:o,setModal:r=>h(r)})]})},R="/assets/images/qILC5JLC-1714027925462.png",M=()=>{const[s,t]=u.useState({username:"",password:"",loading:!1}),i=v(),d=async()=>{if(!s.username)return x.error("Username is required"),!1;if(!s.password)return x.error("Password is required"),!1;try{t({...s,loading:!0}),await x.promise(n(s),{loading:"Checking...",success:e.jsx("b",{children:"Login Success!"}),error:e.jsx("b",{children:"Username and Password wrong."})}),t({...s,loading:!1}),i("/home"),P("isLogin",!0)}catch{t({...s,loading:!1})}},n=a=>new Promise((o,h)=>{setTimeout(()=>{a.username==="nsi"&&a.password==="developer"?o(!0):h(!1)},2e3)});return u.useEffect(()=>{const a=S("isLogin");i(a?"/home":"/")},[i]),e.jsx("div",{className:"flex items-center h-full p-5 align-middle",children:e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("img",{src:R,className:"w-52"})}),e.jsx("input",{value:s.username,className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Username",onChange:a=>t({...s,username:a.target.value})}),e.jsx("input",{value:s.password,type:"password",className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Password",onChange:a=>t({...s,password:a.target.value})}),e.jsxs("button",{onClick:()=>d(),className:"bg-[#178DF9] w-full rounded text-white p-2 outline-none",children:[" ",s.loading?e.jsxs("div",{children:[e.jsx("i",{className:"mr-2 fa-solid fa-spinner fa-spin"}),"Checking Data"]}):"Login"]})]})})},k=u.createContext(void 0),U=({children:s})=>{const[t,i]=u.useState(!1),[d,n]=u.useState(!1);return e.jsx(k.Provider,{value:{fullScreen:t,setFullScreen:i,isLoading:d,setIsLoading:n},children:s})},y=()=>{const s=u.useContext(k);if(!s)throw new Error("useActiveChat must be used within a HookProvider");return s},$=()=>{const s=new URLSearchParams(location.search),t=s.get("id")||"",i=s.get("namaBranchFe")||"",d=s.get("namaBranchBe")||"",n=v(),{fullScreen:a,isLoading:o,setFullScreen:h,setIsLoading:m}=y();return u.useEffect(()=>{const c=[],f=L(w.replace("/api/v1",""));return f.connect(),f.on("connect",()=>{f.emit("join-room",t),f.on("update-progress",p=>{const l=document.getElementById("logConsole");l&&(p.status==="PROGRESS"?(c.push(p.message),l.value=c.join(`
`),l.scrollTop=l.scrollHeight+400,m(!0)):p.status==="FINISH"&&(m(!1),x.success("Update Finish"),c.push(`
`),c.push("Update Finish"),c.push(`
`),l.value=c.join(`
`),l.scrollTop=l.scrollHeight+400))})}),setTimeout(async()=>{var p,l;try{await N.post(w+"/app/update",{name:t,branchBe:d||void 0,branchFe:i||void 0})}catch(g){(p=g.response.data.message)!=null&&p.includes("processed")?(x("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),m(!0)):(l=g.response.data.message)!=null&&l.includes("processed")?(x("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),m(!0)):(x.error(g.response.data.message),m(!1))}},300),()=>{f.disconnect()}},[t,d,i,m]),e.jsxs("div",{className:"w-full h-full overflow-hidden border border-gray-700 rounded-lg terminal-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 terminal-header",children:[e.jsx("div",{className:"flex items-center space-x-2",onClick:()=>n("/home"),children:e.jsx("i",{className:"text-white cursor-pointer fa-solid fa-chevron-left"})}),e.jsxs("div",{className:"justify-center text-sm text-white",children:["Terminal App ",t," ",o&&e.jsx("i",{className:"absolute ml-2 text-white fa-solid fa-spinner fa-spin"})]}),e.jsx("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>h(!a),children:e.jsx("i",{className:"text-white fa-solid fa-maximize"})})]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"terminal-line",children:e.jsx("textarea",{readOnly:!0,id:"logConsole",className:"w-full h-screen p-2 overflow-y-auto text-white bg-black resize-none terminal-input focus:outline-none"})})})]})},H=()=>{const s=new URLSearchParams(location.search),t=s.get("id")||"",i=s.get("namaBranchFe")||"",d=s.get("namaBranchBe")||"",n=v(),{fullScreen:a,isLoading:o,setFullScreen:h,setIsLoading:m}=y();return u.useEffect(()=>{const c=[],f=L(w.replace("/api/v1",""));return f.connect(),f.on("connect",()=>{f.emit("join-room",t),f.on("git-log",p=>{const l=document.getElementById("logGit");l&&(p.status==="PROGRESS"?(c.push(p.message),l.value=c.join(`
`),l.scrollTop=0,m(!0)):p.status==="FINISH"&&(m(!1),c.push(`
`),c.push(`
`),l.value=c.join(`
`),l.scrollTop=0))})}),setTimeout(async()=>{var p,l;try{await N.post(w+"/app/git-log",{name:t})}catch(g){(p=g.response.data.message)!=null&&p.includes("processed")?(x("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),m(!0)):(l=g.response.data.message)!=null&&l.includes("processed")?(x("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),m(!0)):(x.error(g.response.data.message),m(!1))}},300),()=>{f.disconnect()}},[t,d,i,m]),e.jsxs("div",{className:"w-full h-full overflow-hidden border border-gray-700 rounded-lg terminal-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 terminal-header",children:[e.jsx("div",{className:"flex items-center space-x-2",onClick:()=>n("/home"),children:e.jsx("i",{className:"text-white cursor-pointer fa-solid fa-chevron-left"})}),e.jsxs("div",{className:"justify-center text-sm text-white",children:["Git Log App ",t," ",o&&e.jsx("i",{className:"absolute ml-2 text-white fa-solid fa-spinner fa-spin"})]}),e.jsx("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>h(!a),children:e.jsx("i",{className:"text-white fa-solid fa-maximize"})})]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"terminal-line",children:e.jsx("textarea",{readOnly:!0,id:"logGit",className:"w-full h-screen p-2 overflow-y-auto text-white bg-black resize-none terminal-input focus:outline-none"})})})]})},G=()=>{const{fullScreen:s}=y(),[t,i]=u.useState(Date.now());u.useEffect(()=>{const n=setTimeout(()=>{Date.now()-t>12e5&&localStorage.clear()},1e3),a=()=>{i(Date.now())};return window.addEventListener("mousemove",a),window.addEventListener("keydown",a),()=>{clearTimeout(n),window.removeEventListener("mousemove",a),window.removeEventListener("keydown",a)}},[t]);const d=v();return e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:`${s?"w-full":"xxl:w-[25rem] w-full overflow-y-auto no-scrollbar h-screen rounded-md shadow-md md:w-[60%] lg:w-1/3 xl:w-[30%]"} `,children:e.jsxs(_,{children:[e.jsx(b,{index:!0,element:e.jsx(M,{})}),e.jsx(b,{path:"home",element:e.jsx(O,{})}),e.jsx(b,{path:"detail",element:e.jsx($,{})}),e.jsx(b,{path:"log",element:e.jsx(H,{})}),e.jsx(b,{path:"*",element:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-2",children:["Halaman Tidak Di Teumakan ",e.jsx("br",{}),e.jsxs("button",{onClick:()=>d("/home"),className:"bg-[#41B06E] p-1 rounded text-white text-[10px]",children:[" ","Kembali"," "]})]})})]})}),e.jsx(T,{position:"bottom-center",reverseOrder:!1})]})};A.createRoot(document.getElementById("root")).render(e.jsx(F,{children:e.jsx(U,{children:e.jsx(G,{})})}));

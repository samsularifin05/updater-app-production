import{r as i,u as x,a as g,j as e,_ as f,b as w,l as N,R as y,c as m,I as b,d as C,B as L}from"./BXoMlaHi-1713350200701.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(s){if(s.ep)return;s.ep=!0;const t=a(s);fetch(s.href,t)}})();var S={VITE_APP_REACT_URL:"http://192.168.31.80:3939/api/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_REACT_URL:h}=S;function P(r){const o=r+"=",n=decodeURIComponent(document.cookie).split(";");for(let s=0;s<n.length;s++){let t=n[s];for(;t.charAt(0)===" ";)t=t.substring(1);if(t.indexOf(o)===0)return JSON.parse(t.substring(o.length,t.length))}return""}function A(r,o){document.cookie=r+"="+JSON.stringify(o)+";path=/"}const k=()=>{i.useEffect(()=>{n()},[]);const[r,o]=i.useState([]),a=x(),n=async()=>{try{const s=await g.get(h+"/app");o(s.data.names)}catch(s){o(["Nagagold","GK"]),console.log(s)}};return e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[e.jsx("h1",{children:" List App "}),e.jsx("input",{className:"outline-none border-2 p-1 rounded-full px-4 border-gray-300  focus:border-[#178DF9]",placeholder:"Cari App"}),e.jsx("div",{className:"flex mt-4 flex-col gap-3",children:r.map((s,t)=>e.jsx("div",{onClick:()=>a("/detail/"+s),className:"flex w-full border-2 rounded p-2 hover:border-[#178DF9] cursor-pointer",children:s},t))})]})},E="/assets/images/qILC5JLC-1713350200701.png",I=()=>{const[r,o]=i.useState({username:"",password:"",loading:!1}),a=x(),n=async()=>{if(!r.username)return f.error("Username is required"),!1;if(!r.password)return f.error("Password is required"),!1;try{o({...r,loading:!0}),await f.promise(s(r),{loading:"Checking...",success:e.jsx("b",{children:"Login Success!"}),error:e.jsx("b",{children:"Username and Password wrong."})}),o({...r,loading:!1}),a("/home"),A("datalogin",r)}catch{o({...r,loading:!1})}},s=t=>new Promise((l,c)=>{setTimeout(()=>{t.username==="nsi"&&t.password==="developer"?l(!0):c(!1)},2e3)});return i.useEffect(()=>{P("datalogin").username&&a("/home")},[a]),e.jsx("div",{className:"flex items-center align-middle h-full p-5",children:e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("img",{src:E,className:"w-52"})}),e.jsx("input",{value:r.username,className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Username",onChange:t=>o({...r,username:t.target.value})}),e.jsx("input",{value:r.password,type:"password",className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Password",onChange:t=>o({...r,password:t.target.value})}),e.jsxs("button",{onClick:()=>n(),className:"bg-[#178DF9] w-full rounded text-white p-2 outline-none",children:[" ",r.loading?e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"Checking Data"]}):"Login"]})]})})},j=i.createContext(void 0),R=({children:r})=>{const[o,a]=i.useState(!1),[n,s]=i.useState(!1);return e.jsx(j.Provider,{value:{fullScreen:o,setFullScreen:a,isLoading:n,setIsLoading:s},children:r})},v=()=>{const r=i.useContext(j);if(!r)throw new Error("useActiveChat must be used within a HookProvider");return r},D=()=>{const r=w(),o=x(),{fullScreen:a,setFullScreen:n,setIsLoading:s,isLoading:t}=v();i.useEffect(()=>{l()},[]);const l=()=>{const c=N(h.replace("/api/v1",""));c.connect(),c.on("connect",async()=>{c.emit("join-room",r.id);const d=[];c.on("update-progress",p=>{const u=document.getElementById("logConsole");p.status==="PROGRESS"?(d.push(p.message),u.value=d.join(`
`),u.scrollTop=u.scrollHeight,s(!0)):p.status==="FINISH"&&(s(!1),f.success("Update Finish"),d.push(`
`),d.push("Update Finish"),d.push(`
`),u.value=d.join(`
`),u.scrollTop=u.scrollHeight+400)});try{await g.post(h+"/app/update",{name:r.id,socketId:c.id})}catch(p){p.response.data.message.includes("processed")&&(f("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"}),s(!0))}})};return e.jsxs("div",{className:"terminal-container w-full h-full rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"terminal-header bg-gray-800 flex items-center justify-between px-4 py-2",children:[e.jsx("div",{className:"flex items-center space-x-2",onClick:()=>o("/home"),children:e.jsx("i",{className:"fa-solid fa-chevron-left text-white cursor-pointer"})}),e.jsxs("div",{className:"text-sm text-white justify-center",children:["Terminal App ",r.id," ",t&&e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-white absolute ml-2"})]}),e.jsx("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>n(!a),children:e.jsx("i",{className:"fa-solid fa-maximize text-white"})})]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"terminal-line",children:e.jsx("textarea",{readOnly:!0,id:"logConsole",className:"p-2 terminal-input bg-black text-white focus:outline-none resize-none w-full h-screen overflow-y-auto"})})})]})},O=()=>{const{fullScreen:r}=v();return e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:`${r?"w-full":"xxl:w-[25rem] w-full overflow-y-auto no-scrollbar h-screen rounded-md shadow-md md:w-[60%] lg:w-1/3 xl:w-[30%]"} `,children:e.jsxs(y,{children:[e.jsx(m,{index:!0,element:e.jsx(I,{})}),e.jsx(m,{path:"home",element:e.jsx(k,{})}),e.jsx(m,{path:"detail/:id",element:e.jsx(D,{})})]})}),e.jsx(b,{position:"bottom-center",reverseOrder:!1})]})};C.createRoot(document.getElementById("root")).render(e.jsx(L,{children:e.jsx(R,{children:e.jsx(O,{})})}));

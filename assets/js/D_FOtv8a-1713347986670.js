import{r as l,u as f,a as h,j as e,_ as u,b as j,l as v,R as w,c as p,I as N,d as y,B as b}from"./B3j8cFx4-1713347986670.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var C={VITE_APP_REACT_URL:"http://192.168.31.80:3939/api/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_REACT_URL:m}=C;function S(t){const o=t+"=",i=decodeURIComponent(document.cookie).split(";");for(let r=0;r<i.length;r++){let s=i[r];for(;s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(o)===0)return JSON.parse(s.substring(o.length,s.length))}return""}function P(t,o){document.cookie=t+"="+JSON.stringify(o)+";path=/"}const A=()=>{l.useEffect(()=>{i()},[]);const[t,o]=l.useState([]),n=f(),i=async()=>{try{const r=await h.get(m+"/app");o(r.data.names)}catch(r){o(["Nagagold","GK"]),console.log(r)}};return e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[e.jsx("h1",{children:" List App "}),e.jsx("input",{className:"outline-none border-2 p-1 rounded-full px-4 border-gray-300  focus:border-[#178DF9]",placeholder:"Cari App"}),e.jsx("div",{className:"flex mt-4 flex-col gap-3",children:t.map((r,s)=>e.jsx("div",{onClick:()=>n("/detail/"+r),className:"flex w-full border-2 rounded p-2 hover:border-[#178DF9] cursor-pointer",children:r},s))})]})},L="/assets/images/qILC5JLC-1713347986670.png",k=()=>{const[t,o]=l.useState({username:"",password:"",loading:!1}),n=f(),i=async()=>{if(!t.username)return u.error("Username is required"),!1;if(!t.password)return u.error("Password is required"),!1;try{o({...t,loading:!0}),await u.promise(r(t),{loading:"Checking...",success:e.jsx("b",{children:"Login Success!"}),error:e.jsx("b",{children:"Username and Password wrong."})}),o({...t,loading:!1}),n("/home"),P("datalogin",t)}catch{o({...t,loading:!1})}},r=s=>new Promise((a,c)=>{setTimeout(()=>{s.username==="nsi"&&s.password==="developer"?a(!0):c(!1)},2e3)});return l.useEffect(()=>{S("datalogin").username&&n("/home")},[n]),e.jsx("div",{className:"flex items-center align-middle h-full p-5",children:e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("img",{src:L,className:"w-52"})}),e.jsx("input",{value:t.username,className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Username",onChange:s=>o({...t,username:s.target.value})}),e.jsx("input",{value:t.password,type:"password",className:"outline-none border-2 p-2  focus:border-[#178DF9]",placeholder:"Please Input Password",onChange:s=>o({...t,password:s.target.value})}),e.jsxs("button",{onClick:()=>i(),className:"bg-[#178DF9] w-full rounded text-white p-2 outline-none",children:[" ",t.loading?e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),"Checking Data"]}):"Login"]})]})})},x=l.createContext(void 0),E=({children:t})=>{const[o,n]=l.useState(!1);return e.jsx(x.Provider,{value:{fullScreen:o,setFullScreen:n},children:t})},g=()=>{const t=l.useContext(x);if(!t)throw new Error("useActiveChat must be used within a HookProvider");return t},R=()=>{const t=j(),o=f(),{fullScreen:n,setFullScreen:i}=g();l.useEffect(()=>{r()},[]);const r=()=>{const s=v(m.replace("/api/v1",""));s.connect(),s.on("connect",async()=>{s.emit("join-room",t.id);const a=[];s.on("update-progress",c=>{const d=document.getElementById("logConsole");c.status==="PROGRESS"?(a.push(c.message),d.value=a.join(`
`),d.scrollTop=d.scrollHeight):c.status==="FINISH"&&(u.success("Update Finish"),a.push(`
`),a.push("Update Finish"),a.push(`
`),d.value=a.join(`
`),d.scrollTop=d.scrollHeight+400)});try{await h.post(m+"/app/update",{name:t.id,socketId:s.id})}catch(c){c.response.data.message.includes("processed")&&u("Sedang dalam proses update, silahkan tunggu!",{icon:"🧘🏾"})}})};return e.jsxs("div",{className:"terminal-container w-full h-full rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"terminal-header bg-gray-800 flex items-center justify-between px-4 py-2",children:[e.jsx("div",{className:"flex items-center space-x-2",onClick:()=>o("/home"),children:e.jsx("i",{className:"fa-solid fa-chevron-left text-white cursor-pointer"})}),e.jsxs("div",{className:"text-sm text-white",children:["Terminal App ",t.id]}),e.jsx("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>i(!n),children:e.jsx("i",{className:"fa-solid fa-maximize text-white"})})]}),e.jsx("div",{className:"terminal-body",children:e.jsx("div",{className:"terminal-line",children:e.jsx("textarea",{readOnly:!0,id:"logConsole",className:"p-2 terminal-input bg-black text-white focus:outline-none resize-none w-full h-screen overflow-y-auto"})})})]})},D=()=>{const{fullScreen:t}=g();return e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:`${t?"w-full":"xxl:w-[25rem] w-full overflow-y-auto no-scrollbar h-screen rounded-md shadow-md md:w-[60%] lg:w-1/3 xl:w-[30%]"} `,children:e.jsxs(w,{children:[e.jsx(p,{index:!0,element:e.jsx(k,{})}),e.jsx(p,{path:"home",element:e.jsx(A,{})}),e.jsx(p,{path:"detail/:id",element:e.jsx(R,{})})]})}),e.jsx(N,{position:"top-center",reverseOrder:!1})]})};y.createRoot(document.getElementById("root")).render(e.jsx(b,{basename:"/updater-app/",children:e.jsx(E,{children:e.jsx(D,{})})}));
